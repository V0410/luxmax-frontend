<template>
  <div class="flex justify-between">
    <div v-for="(state, i) in states" :key="state.id" class="relative hidden laptop:block">
      <template v-if="i === 0">
        <svg
          width="108"
          height="56"
          viewBox="0 0 108 56"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="-mx-1"
        >
          <mask id="path-1-inside-1_2908_4131" fill="white">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0 4C0 1.79086 1.79086 0 4 0H89.6787C91.1141 0 92.4395 0.769144 93.1517 2.01544L106.866 26.0154C107.569 27.2452 107.569 28.7548 106.866 29.9846L93.1517 53.9846C92.4395 55.2309 91.1141 56 89.6787 56H4C1.79086 56 0 54.2091 0 52V4Z"
            />
          </mask>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 4C0 1.79086 1.79086 0 4 0H89.6787C91.1141 0 92.4395 0.769144 93.1517 2.01544L106.866 26.0154C107.569 27.2452 107.569 28.7548 106.866 29.9846L93.1517 53.9846C92.4395 55.2309 91.1141 56 89.6787 56H4C1.79086 56 0 54.2091 0 52V4Z"
            :class="currentStateIndex === i ? 'fill-p1' : 'fill-white'"
          />
          <path
            d="M106.866 26.0154L105.998 26.5116L106.866 26.0154ZM106.866 29.9846L105.998 29.4884L106.866 29.9846ZM93.1517 53.9846L94.0199 54.4807L93.1517 53.9846ZM93.1517 2.01544L94.0199 1.51931L93.1517 2.01544ZM89.6787 -1H4V1H89.6787V-1ZM92.2834 2.51158L105.998 26.5116L107.734 25.5193L94.0199 1.51931L92.2834 2.51158ZM105.998 26.5116C106.525 27.4339 106.525 28.5661 105.998 29.4884L107.734 30.4807C108.613 28.9435 108.613 27.0565 107.734 25.5193L105.998 26.5116ZM105.998 29.4884L92.2834 53.4884L94.0199 54.4807L107.734 30.4807L105.998 29.4884ZM4 57H89.6787V55H4V57ZM-1 4V52H1V4H-1ZM92.2834 53.4884C91.7493 54.4231 90.7553 55 89.6787 55V57C91.473 57 93.1297 56.0386 94.0199 54.4807L92.2834 53.4884ZM4 -1C1.23857 -1 -1 1.23858 -1 4H1C1 2.34315 2.34315 1 4 1V-1ZM4 55C2.34315 55 1 53.6569 1 52H-1C-1 54.7614 1.23858 57 4 57V55ZM89.6787 1C90.7553 1 91.7493 1.57686 92.2834 2.51158L94.0199 1.51931C93.1297 -0.0385695 91.473 -1 89.6787 -1V1Z"
            :class="currentStateIndex >= i ? 'fill-p3' : 'fill-[#ddd]'"
            mask="url(#path-1-inside-1_2908_4131)"
          />
        </svg>
      </template>
      <template v-else-if="i === states.length - 1">
        <svg
          width="90"
          height="56"
          viewBox="0 0 90 56"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="-mx-1"
        >
          <mask id="path-1-inside-1_2908_4174" fill="white">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M1.41966 5.98456C-0.10413 3.31793 1.82134 0 4.89263 0H85.9999C88.2091 0 89.9999 1.79086 89.9999 4V52C89.9999 54.2091 88.2091 56 85.9999 56H4.89263C1.82134 56 -0.10413 52.6821 1.41966 50.0154L12.8659 29.9846C13.5686 28.7548 13.5686 27.2452 12.8659 26.0154L1.41966 5.98456Z"
            />
          </mask>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M1.41966 5.98456C-0.10413 3.31793 1.82134 0 4.89263 0H85.9999C88.2091 0 89.9999 1.79086 89.9999 4V52C89.9999 54.2091 88.2091 56 85.9999 56H4.89263C1.82134 56 -0.10413 52.6821 1.41966 50.0154L12.8659 29.9846C13.5686 28.7548 13.5686 27.2452 12.8659 26.0154L1.41966 5.98456Z"
            :class="currentStateIndex === i ? 'fill-p1' : 'fill-white'"
          />
          <path
            d="M12.8659 29.9846L12.4318 29.7365L12.8659 29.9846ZM12.8659 26.0154L12.4318 26.2635L12.8659 26.0154ZM1.41966 50.0154L0.985536 49.7674L1.41966 50.0154ZM1.41966 5.98456L0.985536 6.23263L1.41966 5.98456ZM85.9999 -0.5H4.89263V0.5H85.9999V-0.5ZM90.4999 52V4H89.4999V52H90.4999ZM4.89263 56.5H85.9999V55.5H4.89263V56.5ZM12.4318 29.7365L0.985536 49.7674L1.85378 50.2635L13.3 30.2326L12.4318 29.7365ZM12.4318 26.2635C13.0466 27.3395 13.0466 28.6605 12.4318 29.7365L13.3 30.2326C14.0905 28.8492 14.0905 27.1508 13.3 25.7674L12.4318 26.2635ZM0.985536 6.23263L12.4318 26.2635L13.3 25.7674L1.85378 5.73649L0.985536 6.23263ZM4.89263 55.5C2.20525 55.5 0.520465 52.5968 1.85378 50.2635L0.985536 49.7674C-0.728725 52.7673 1.43743 56.5 4.89263 56.5V55.5ZM89.4999 52C89.4999 53.933 87.9329 55.5 85.9999 55.5V56.5C88.4852 56.5 90.4999 54.4853 90.4999 52H89.4999ZM4.89263 -0.5C1.43743 -0.5 -0.728724 3.23267 0.985536 6.23263L1.85378 5.73649C0.520465 3.40319 2.20525 0.5 4.89263 0.5V-0.5ZM85.9999 0.5C87.9329 0.5 89.4999 2.067 89.4999 4H90.4999C90.4999 1.51472 88.4852 -0.5 85.9999 -0.5V0.5Z"
             :class="currentStateIndex >= i ? 'fill-p3' : 'fill-[#ddd]'"
            mask="url(#path-1-inside-1_2908_4174)"
          />
        </svg>
      </template>
      <template v-else>
        <svg
          width="106"
          height="56"
          viewBox="0 0 106 56"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="-mx-1"
        >
          <mask id="path-1-inside-1_2908_4156" fill="white">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M91.1516 2.01544C90.4394 0.769144 89.114 0 87.6786 0H4.89263C1.82134 0 -0.10413 3.31793 1.41966 5.98456L12.8659 26.0154C13.5686 27.2452 13.5686 28.7548 12.8659 29.9846L1.41966 50.0154C-0.10413 52.6821 1.82134 56 4.89263 56H87.6786C89.114 56 90.4394 55.2309 91.1516 53.9846L104.866 29.9846C105.569 28.7548 105.569 27.2452 104.866 26.0154L91.1516 2.01544Z"
            />
          </mask>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M91.1516 2.01544C90.4394 0.769144 89.114 0 87.6786 0H4.89263C1.82134 0 -0.10413 3.31793 1.41966 5.98456L12.8659 26.0154C13.5686 27.2452 13.5686 28.7548 12.8659 29.9846L1.41966 50.0154C-0.10413 52.6821 1.82134 56 4.89263 56H87.6786C89.114 56 90.4394 55.2309 91.1516 53.9846L104.866 29.9846C105.569 28.7548 105.569 27.2452 104.866 26.0154L91.1516 2.01544Z"
            :class="currentStateIndex === i ? 'fill-p1' : 'fill-white'"
          />
          <path
            d="M12.8659 26.0154L12.4318 26.2635L12.8659 26.0154ZM12.8659 29.9846L12.4318 29.7365L12.8659 29.9846ZM104.866 29.9846L104.432 29.7365L104.866 29.9846ZM104.866 26.0154L104.432 26.2635L104.866 26.0154ZM91.1516 2.01544L91.5857 1.76737L91.1516 2.01544ZM91.1516 53.9846L91.5857 54.2326L91.1516 53.9846ZM1.41966 5.98456L1.85378 5.73649L1.41966 5.98456ZM4.89263 0.5H87.6786V-0.5H4.89263V0.5ZM13.3 25.7674L1.85378 5.73649L0.985536 6.23263L12.4318 26.2635L13.3 25.7674ZM13.3 30.2326C14.0905 28.8492 14.0905 27.1508 13.3 25.7674L12.4318 26.2635C13.0466 27.3395 13.0466 28.6605 12.4318 29.7365L13.3 30.2326ZM1.85378 50.2635L13.3 30.2326L12.4318 29.7365L0.985536 49.7674L1.85378 50.2635ZM87.6786 55.5H4.89263V56.5H87.6786V55.5ZM104.432 29.7365L90.7175 53.7365L91.5857 54.2326L105.3 30.2326L104.432 29.7365ZM104.432 26.2635C105.047 27.3395 105.047 28.6605 104.432 29.7365L105.3 30.2326C106.091 28.8492 106.091 27.1508 105.3 25.7674L104.432 26.2635ZM90.7175 2.26351L104.432 26.2635L105.3 25.7674L91.5857 1.76737L90.7175 2.26351ZM0.985536 49.7674C-0.728724 52.7673 1.43742 56.5 4.89263 56.5V55.5C2.20525 55.5 0.520465 52.5968 1.85378 50.2635L0.985536 49.7674ZM87.6786 0.5C88.9346 0.5 90.0943 1.173 90.7175 2.26351L91.5857 1.76737C90.7845 0.365287 89.2935 -0.5 87.6786 -0.5V0.5ZM87.6786 56.5C89.2935 56.5 90.7845 55.6347 91.5857 54.2326L90.7175 53.7365C90.0943 54.827 88.9346 55.5 87.6786 55.5V56.5ZM4.89263 -0.5C1.43743 -0.5 -0.728724 3.23267 0.985536 6.23263L1.85378 5.73649C0.520465 3.40319 2.20525 0.5 4.89263 0.5V-0.5Z"
             :class="currentStateIndex >= i ? 'fill-p3' : 'fill-[#ddd]'"
            mask="url(#path-1-inside-1_2908_4156)"
          />
        </svg>
      </template>
      <div class="text-xs -mx-1 w-[105px] h-[56px] flex justify-center items-center absolute top-0 text-center" :class="currentStateIndex >= i ? 'text-p7' : 'text-t5'">
        <div class="max-w-[65px]" v-text="state.text" />
      </div>
    </div>
    <div class="laptop:hidden flex flex-wrap items-center gap-3 text-[10px]">
        <template v-for="(state, i) in states" :key="state.id">
            <div v-text="state.text" class="p-1" :class="currentStateIndex === i ? 'bg-p1 text-p7' : currentStateIndex > i ? 'text-p7' : 'text-t5'  " />
            <IconArrowRight v-if="i < states.length - 1" class="w-4 h-4 fill-p7" />
        </template>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  currentState: String,
  states: Array,
});

const currentStateIndex = computed(() => props.states.findIndex(el => el.value === props.currentState))
</script>
